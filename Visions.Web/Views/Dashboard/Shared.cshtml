@using PagedList;
@using PagedList.Mvc;

@model IPagedList<Visions.Web.Models.PhotoViewModel>

@{
    ViewBag.Title = "Shared dashboard";
}

<h2>@ViewBag.Title</h2>

@using (Ajax.BeginForm("Search", null,
                    new AjaxOptions
                    {
                        UpdateTargetId = "allPhotos",
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "POST"
                    }, new
                    {
                        id = "searchForm"
                    }))
{
    <input type="text" name="query" placeholder="Search" onsubmit="changed()" class="navbar-form form-control" />
}

<div id="allPhotos">
    @if (this.Model.Count() > 0)
    {
        @Html.Partial("_AllPhotos", this.Model)
    }
</div>

<div class="col-sm-10">
    @Html.PagedListPager(this.Model, page => Url.Action("Shared",
       new
       {
           text = this.ViewBag.SelectedTag,
           page,
           pageSize = this.Model.PageSize
       }))
    <div class="btn btn-post-article text-uppercase">
        @Html.ActionLink("Back to homepage", "Index", "Home")
    </div>
</div>

@section Scripts{
    <script>
        function changed() {
            $("#searchForm").submit();
        }
    </script>
}

